\documentclass[french, a4paper, 12pt, twoside, openright]{memoir}

\usepackage{geometry}
\usepackage[T1]{fontenc}
\usepackage{xcharter-otf}

\usepackage[french]{babel}
\usepackage{csquotes}

\usepackage[style=authoryear-comp]{biblatex}

\usepackage{microtype}

\usepackage[dvipsnames]{xcolor}
\usepackage{siunitx}
\usepackage[depth=4]{bookmark}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{hyperref}

\let\printglossary\relax
\let\theglossary\relax
\let\endtheglossary\relax
\usepackage[
xindy,
nogroupskip,
nonumberlist,
toc,
section=section
]{glossaries}

\usepackage{cleveref}

\newcommand\Author{Clément Haëck}
\newcommand\Email{clement.haeck@locean.ipsl.fr}
\newcommand\Title{Impact des fronts sur le Phytoplancton dans la région du Gulf-Stream quantifié par imagerie satellitaire}
\newcommand\Subject{biogeochemistry}
\newcommand\Keywords{}

\chapterstyle{veelo}
\pagestyle{ruled}

% A4 297x210mm
\settrims{0pt}{0pt}
\settypeblocksize{197mm}{140mm}{*}
\setulmargins{4cm}{*}{*}
\setlrmargins{3cm}{*}{*}
\setmarginnotes{17pt}{51pt}{\onelineskip}
\setheadfoot{\onelineskip}{2\onelineskip}
\setheaderspaces{*}{2\onelineskip}{*}
\checkandfixthelayout

\setsecnumdepth{subsection}
\setcounter{tocdepth}{2}

\graphicspath{{resources/}}

\addbibresource[label=refs]{resources/references.bib}
\ExecuteBibliographyOptions{
  hyperref=true, indexing=bib, uniquename=full,
  sorting=nyt, sortcites=true, pluralothers=true, refsection=chapter,
  url=false, dashed=false, mergedate=false
}
% Remove small caps in family names
\DefineBibliographyExtras{french}{\restorecommand\mkbibnamefamily}
\newcommand\pcite[1]{\parencite}

\sisetup{mode=text, locale=FR}
\DeclareSIUnit\mgm{\milli\gram\per\cubic\metre}
\DeclareSIUnit\dC{\degreeCelsius}

\hypersetup{
  colorlinks   = true,
  unicode      = true,
  linktocpage  = true,
  urlcolor     = BlueViolet,
  linkcolor    = RoyalBlue,
  citecolor    = RoyalBlue,
}

\AtEndPreamble{
  \hypersetup{
    pdftitle={\Title},
    pdfauthor={\Author, \Email},
    pdfsubject={\Subject},
    pdfkeywords={\Keywords}
  }
}

\glsaddall
\glsdisablehyper
\makeglossaries
\loadglsentries{gloss}

\newcommand{\biblio}{{
    \emergencystretch=1em
    \printbibliography[heading=subbibintoc]
  }}


\begin{document}

% Page de garde
% Résumé
% Remerciements
\include{front_matter}

\printglossary[toctitle=Glossaire]

% TOC
\clearpage
\tableofcontents*
% \newpage
% \listoffigures
% \newpage
% \listoftables

\mainmatter

\include{intro}
% \biblio
\include{méthodes}
% \biblio
\include{res_chl}
% \biblio
\include{res_pft}
% \biblio
\include{res_global}
% \biblio
\include{conclusion}

\end{document}
